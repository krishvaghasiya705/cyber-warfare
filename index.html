<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta-name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CYBER WARFARE COMMAND CENTER</title>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Share+Tech+Mono&display=swap');
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Share Tech Mono', monospace;
            background: #000;
            color: #0f0;
            overflow: hidden;
            height: 100vh;
        }

        .bg-animation, .grid-overlay, .scanlines { position: fixed; width: 100%; height: 100%; top: 0; left: 0; }

        .bg-animation {
            background: radial-gradient(ellipse at top, #001a00, #000),
                        radial-gradient(ellipse at bottom, #000a00, #000);
            z-index: 0;
        }

        .grid-overlay {
            background-image:
                linear-gradient(rgba(0,255,0,0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0,255,0,0.03) 1px, transparent 1px);
            background-size: 50px 50px;
            animation: gridScroll 20s linear infinite;
            z-index: 1;
        }
        @keyframes gridScroll { from {transform: translateY(0);} to {transform: translateY(50px);} }

        .scanlines {
            background: repeating-linear-gradient(
                0deg,
                rgba(0,255,0,0.05) 0px,
                transparent 2px,
                rgba(0,255,0,0.05) 4px
            );
            animation: scanline 10s linear infinite;
            z-index: 2;
        }
        @keyframes scanline { from {transform: translateY(0);} to {transform: translateY(100%);} }

        /* Corner brackets */
        .corner-bracket {
            position: fixed;
            width: 100px; height: 100px;
            border: 3px solid #0f0;
            z-index: 3;
            box-shadow: 0 0 20px #0f0;
        }
        .top-left { top: 20px; left: 20px; border-right: none; border-bottom: none; }
        .top-right { top: 20px; right: 20px; border-left: none; border-bottom: none; }
        .bottom-left { bottom: 20px; left: 20px; border-right: none; border-top: none; }
        .bottom-right { bottom: 20px; right: 20px; border-left: none; border-top: none; }

        /* Main Container */
        .cyber-container {
            position: relative;
            width: 100%; height: 100vh;
            display: flex; justify-content: center; align-items: center;
            z-index: 10;
        }

        .title {
            font-family: Orbitron;
            font-size: 3rem;
            margin-bottom: 20px;
            text-shadow: 0 0 15px #0f0;
        }

        .input-panel {
            position: absolute;
            top: 130px;
            padding: 25px 40px;
            background: rgba(0,0,0,0.85);
            border: 2px solid #0f0;
            box-shadow: 0 0 40px #0f0;
        }

        input, button {
            font-family: 'Share Tech Mono';
            padding: 12px 18px;
            font-size: 1rem;
            border: 2px solid #0f0;
        }
        input {
            width: 260px;
            background: #001a00;
            color: #0f0;
        }
        button {
            background: #0f0;
            color: #000;
            cursor: pointer;
            margin-left: 10px;
        }

        #globe-container { width: 700px; height: 700px; }

        /* LEFT SIDE PANEL */
        .info-panel {
            position: absolute;
            top: 160px;
            left: 40px;
            width: 360px;
            background: rgba(0,0,0,0.95);
            padding: 20px;
            border: 2px solid #0f0;
            box-shadow: 0 0 40px #0f0;
        }
        .info-title {
            font-family: Orbitron;
            margin-bottom: 10px;
            font-size: 1.2rem;
            text-shadow: 0 0 15px #0f0;
        }
        .info-line { margin: 6px 0; color: #0f0; }

        .map-btn {
            margin-top: 10px;
            width: 100%;
            background: #0f0;
            padding: 12px;
            color: #000;
            font-weight: bold;
            cursor: pointer;
        }

        /* CAMERA CONTROL PANEL */
        .webcam-panel {
            position: absolute;
            top: 220px;
            right: 40px;
            width: 360px;
            background: rgba(0,0,0,0.95);
            padding: 18px;
            border: 2px solid #f00;
            box-shadow: 0 0 40px #f00;
        }

        video { 
            width: 100%; 
            height: 220px; 
            background: #000; 
            border: 2px solid #f00; 
        }

        .dual-cam-container {
            display: flex;
            gap: 10px;
        }
        .dual-cam-container video {
            width: 48%;
            height: 180px;
        }

        .cam-btn {
            width: 100%;
            padding: 10px;
            margin-top: 10px;
            background: #f00;
            border: 2px solid #f00;
            color: #000;
            font-weight: bold;
            cursor: pointer;
        }
    </style>
</head>

<body>

<div class="bg-animation"></div>
<div class="grid-overlay"></div>
<div class="scanlines"></div>

<div class="corner-bracket top-left"></div>
<div class="corner-bracket top-right"></div>
<div class="corner-bracket bottom-left"></div>
<div class="corner-bracket bottom-right"></div>

<div class="cyber-container">

    <div class="title">CYBER WARFARE COMMAND CENTER</div>

    <div class="input-panel">
        <input id="commandInput" placeholder="ENTER COMMAND..." />
        <button onclick="executeCommand()">EXECUTE</button>
    </div>

    <div id="globe-container"></div>

    <!-- LEFT PANEL -->
    <div class="info-panel">
        <div class="info-title">USER LOCATION & DEVICE</div>

        <div id="ip" class="info-line">IP ADDRESS: Loading...</div>
        <div id="location" class="info-line">LOCATION: Loading...</div>
        <div id="country" class="info-line"></div>
        <div id="region" class="info-line"></div>
        <div id="coords" class="info-line"></div>
        <div id="isp" class="info-line"></div>

        <div class="info-title" style="margin-top: 20px;">DEVICE INFO</div>
        <div id="device-type" class="info-line"></div>
        <div id="device-browser" class="info-line"></div>
        <div id="device-os" class="info-line"></div>
        <div id="device-screen" class="info-line"></div>
        <div id="device-platform" class="info-line"></div>

        <div class="info-title" style="margin-top: 20px;">AVAILABLE CAMERAS</div>
        <div id="deviceList" class="info-line">Loading...</div>

        <button id="mapBtn" class="map-btn" onclick="openMap()">OPEN GOOGLE MAPS</button>
    </div>

    <!-- WEBCAM PANEL -->
    <div class="webcam-panel">
        
        <video id="singleCam" autoplay></video>

        <div class="dual-cam-container" id="dualCamBox" style="display:none;">
            <video id="frontCam" autoplay></video>
            <video id="backCam" autoplay></video>
        </div>

        <button class="cam-btn" onclick="switchCamera()">SWITCH CAMERA</button>
        <button class="cam-btn" onclick="toggleDualMode()">ENABLE DUAL CAMERAS</button>

    </div>
</div>

<script>
/* ---------------- LOCATION ---------------- */
fetch("https://ipapi.co/json/")
    .then(res => res.json())
    .then(data => {
        document.getElementById("ip").innerText = "IP ADDRESS: " + data.ip;
        document.getElementById("location").innerText = "CITY: " + data.city;
        document.getElementById("country").innerText = "COUNTRY: " + data.country_name;
        document.getElementById("region").innerText = "REGION: " + data.region;
        document.getElementById("coords").innerText = "COORDINATES: " + data.latitude + ", " + data.longitude;
        document.getElementById("isp").innerText = "ISP: " + data.org;

        window.userLat = data.latitude;
        window.userLon = data.longitude;
    });

function openMap() {
    if (!window.userLat) return;
    window.open(`https://www.google.com/maps?q=${window.userLat},${window.userLon}`);
}

/* ---------------- DEVICE DETECTION ---------------- */
function detectDeviceType() {
    const ua = navigator.userAgent.toLowerCase();
    if (/mobile|iphone|android/.test(ua)) return "MOBILE";
    if (/ipad|tablet/.test(ua)) return "TABLET";
    return "DESKTOP / LAPTOP";
}

document.getElementById("device-type").innerText = "DEVICE TYPE: " + detectDeviceType();
document.getElementById("device-browser").innerText = "BROWSER: " + navigator.userAgent;
document.getElementById("device-os").innerText = "OS: " + navigator.platform;
document.getElementById("device-screen").innerText = "SCREEN: " + window.screen.width + "x" + window.screen.height;
document.getElementById("device-platform").innerText = "PLATFORM: " + navigator.appVersion;


/* ----------- CAMERA SYSTEM (SWITCH + DUAL MODE) ------------ */
let currentCam = "user"; // front
let camList = [];
let dualMode = false;

async function loadDevices() {
    const devices = await navigator.mediaDevices.enumerateDevices();
    camList = devices.filter(d => d.kind === "videoinput");

    document.getElementById("deviceList").innerText =
        camList.map((c, i) => `${i+1}. ${c.label || "Camera " + (i+1)}`).join("\n");
}

loadDevices();

async function startSingleCamera() {
    dualMode = false;
    document.getElementById("dualCamBox").style.display = "none";
    document.getElementById("singleCam").style.display = "block";

    let stream = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: currentCam }
    });

    document.getElementById("singleCam").srcObject = stream;
}

function switchCamera() {
    currentCam = currentCam === "user" ? "environment" : "user";
    startSingleCamera();
}

async function toggleDualMode() {
    dualMode = !dualMode;

    if (!dualMode) {
        startSingleCamera();
        return;
    }

    document.getElementById("singleCam").style.display = "none";
    document.getElementById("dualCamBox").style.display = "flex";

    let front = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: "user" }
    });

    let back = await navigator.mediaDevices.getUserMedia({
        video: { facingMode: "environment" }
    });

    document.getElementById("frontCam").srcObject = front;
    document.getElementById("backCam").srcObject = back;
}

startSingleCamera();

/* ---------------- GLOBE ---------------- */
let scene = new THREE.Scene();
let camera = new THREE.PerspectiveCamera(60, 1, 0.1, 1000);
let renderer = new THREE.WebGLRenderer({ alpha: true });

renderer.setSize(700, 700);
document.getElementById("globe-container").appendChild(renderer.domElement);

let globe = new THREE.Mesh(
    new THREE.SphereGeometry(5, 32, 32),
    new THREE.MeshBasicMaterial({ wireframe: true, color: 0x00ff00 })
);

scene.add(globe);
camera.position.z = 10;

function animate() {
    requestAnimationFrame(animate);
    globe.rotation.y += 0.003;
    renderer.render(scene, camera);
}
animate();

/* ---------------- COMMAND ---------------- */
function executeCommand() {
    alert("COMMAND EXECUTED: " + document.getElementById("commandInput").value);
}
</script>

</body>
</html>
